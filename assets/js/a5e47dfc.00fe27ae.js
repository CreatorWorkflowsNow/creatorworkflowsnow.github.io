"use strict";(self.webpackChunkCreatorWorkflowsNow=self.webpackChunkCreatorWorkflowsNow||[]).push([[927],{3905:(t,e,a)=>{a.d(e,{Zo:()=>c,kt:()=>f});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function s(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},i=Object.keys(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var l=n.createContext({}),p=function(t){var e=n.useContext(l),a=e;return t&&(a="function"==typeof t?t(e):o(o({},e),t)),a},c=function(t){var e=p(t.components);return n.createElement(l.Provider,{value:e},t.children)},h="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},m=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,i=t.originalType,l=t.parentName,c=s(t,["components","mdxType","originalType","parentName"]),h=p(a),m=r,f=h["".concat(l,".").concat(m)]||h[m]||d[m]||i;return a?n.createElement(f,o(o({ref:e},c),{},{components:a})):n.createElement(f,o({ref:e},c))}));function f(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var i=a.length,o=new Array(i);o[0]=m;var s={};for(var l in e)hasOwnProperty.call(e,l)&&(s[l]=e[l]);s.originalType=t,s[h]="string"==typeof t?t:r,o[1]=s;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},83685:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={id:"optional-lab-section-1",title:"Optional Lab: Section 1",pagination_label:"Optional Lab: Section 1",sidebar_label:"Section 1",hide_table_of_contents:!0,draft:!1},o=void 0,s={unversionedId:"optional-lab-section-1",id:"optional-lab-section-1",title:"Optional Lab: Section 1",description:"Overview",source:"@site/labs/spokegen/10-optional-lab-section-1.md",sourceDirName:".",slug:"/optional-lab-section-1",permalink:"/labs/spokegen/optional-lab-section-1",draft:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{id:"optional-lab-section-1",title:"Optional Lab: Section 1",pagination_label:"Optional Lab: Section 1",sidebar_label:"Section 1",hide_table_of_contents:!0,draft:!1},sidebar:"spokegen",previous:{title:"Use the Spoke in a Flow",permalink:"/labs/spokegen/use-spoke-in-a-flow"},next:{title:"Optional Lab: Section 2",permalink:"/labs/spokegen/optional-lab-section-2"}},l={},p=[{value:"Overview",id:"overview",level:2},{value:"Instructions",id:"instructions",level:2}],c={toc:p},h="wrapper";function d(t){let{components:e,...i}=t;return(0,r.kt)(h,(0,n.Z)({},c,i,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"Handling integrations is often not as straightforward as this lab may suggest. In the previous section of the lab, the data was sent to the API in the same format as it was in ServiceNow. However, in this scenario, we are sending data to an API that expects the data to be in a specific format. In this optional lab, we will explore how to apply data transformation in Flow Designer before sending the data to the external API."),(0,r.kt)("h2",{id:"instructions"},"Instructions"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"On your instance, navigate to the ",(0,r.kt)("strong",{parentName:"li"},"All"),' menu (1) and in the filter navigator (2), type "x_snc_visitoracc_0_visitors_list.do" and press enter to open that custom table.\n',(0,r.kt)("img",{alt:"Alt text",src:a(40885).Z,width:"349",height:"239"}))),(0,r.kt)("p",null,"In this use case, a custom table is utilized by a ServiceNow app developed by ACME Inc. When a visitor checks in at the reception of their building, they can scan their government ID. Using our DocIntel capability, a new record is generated in that table for the visitor. Information such as the First Name, Last Name, and Date of Birth of the visitor is then extracted from their government ID and stored in that table. In the following section, we will concentrate on creating the workflow that will take this data, transform it, and utilize it with the new spoke we created earlier in this lab."),(0,r.kt)("p",null,"Please note the following details: Visitor First Name and Visitor Last Name values (1) are in uppercase. Additionally, observe the Date of Birth (2), which is in the MM/DD/YYYY format."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Alt text",src:a(46031).Z,width:"1330",height:"233"})),(0,r.kt)("p",null,"The external API for which we previously created a new spoke action won't recognize those values in that format. The API expects the format to be Firstname, Lastname, and a date in the YYYY-MM-DD format."),(0,r.kt)("p",null,"Now, let's create the workflow that will query the API to verify whether the user has the necessary authorization to access the building. We will utilize a Data Transform and our newly created Spoke Action for this purpose."),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Open Flow Designer\n",(0,r.kt)("img",{alt:"Alt text",src:a(93137).Z,width:"295",height:"233"}))),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Create new")," (1) then ",(0,r.kt)("strong",{parentName:"li"},"Flow")," (2)\n",(0,r.kt)("img",{alt:"Alt text",src:a(21209).Z,width:"946",height:"216"}))),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Type the value ",(0,r.kt)("strong",{parentName:"li"},"Verify Access Request")," on the  ",(0,r.kt)("strong",{parentName:"li"},"Flow Name")," field (1) then click ",(0,r.kt)("strong",{parentName:"li"},"Submit")," (2)\n",(0,r.kt)("img",{alt:"Alt text",src:a(50402).Z,width:"571",height:"434"}))),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"If you get this message, click ",(0,r.kt)("strong",{parentName:"li"},"Skip tour"),(0,r.kt)("img",{alt:"Alt text",src:a(72726).Z,width:"477",height:"347"}))),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Add a trigger")," (1) to set the condition to trigger that flow.\n",(0,r.kt)("img",{alt:"Alt text",src:a(18056).Z,width:"335",height:"284"}))),(0,r.kt)("ol",{start:7},(0,r.kt)("li",{parentName:"ol"},"Select ",(0,r.kt)("strong",{parentName:"li"},"Record")," (1) then click ",(0,r.kt)("strong",{parentName:"li"},"Updated")," (2).\n",(0,r.kt)("img",{alt:"Alt text",src:a(96783).Z,width:"784",height:"312"}))),(0,r.kt)("ol",{start:8},(0,r.kt)("li",{parentName:"ol"},"Select the ",(0,r.kt)("strong",{parentName:"li"},"visitors")," (1) table from the list then click ",(0,r.kt)("strong",{parentName:"li"},"Add Filters")," (2) Set the condition as shown below\n",(0,r.kt)("img",{alt:"Alt text",src:a(18063).Z,width:"746",height:"278"}))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"With the condition we are setting above, the flow will be triggered as soon as DocIntel extracts data from the visitor's government ID and updates the visitor record associated with that visitor.")),(0,r.kt)("p",null,"Now we need to add to our flow the spoke action that we have created earlier in this lab."),(0,r.kt)("ol",{start:9},(0,r.kt)("li",{parentName:"ol"},"Under the ",(0,r.kt)("strong",{parentName:"li"},"Actions")," section, click ",(0,r.kt)("strong",{parentName:"li"},"Action")," (1), type ",(0,r.kt)("strong",{parentName:"li"},"visitor access")," (2) then select ",(0,r.kt)("strong",{parentName:"li"},"Visitor Access")," from the ",(0,r.kt)("strong",{parentName:"li"},"INSTALLED SPOKES")," list (3) then click ",(0,r.kt)("strong",{parentName:"li"},"Check if a use exists")," (4)\n",(0,r.kt)("img",{alt:"Alt text",src:a(78230).Z,width:"564",height:"380"}))),(0,r.kt)("p",null,"You should see a screen as shown below"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Alt text",src:a(15694).Z,width:"974",height:"348"})),(0,r.kt)("p",null,"We need to pass the data from the record to that Action step."),(0,r.kt)("ol",{start:10},(0,r.kt)("li",{parentName:"ol"},"Expand the Visitors Record secrtion in the data pill as shown below:\n",(0,r.kt)("img",{alt:"Alt text",src:a(27206).Z,width:"1007",height:"507"}))),(0,r.kt)("ol",{start:11},(0,r.kt)("li",{parentName:"ol"},"Then scroll down to see fields we need, ",(0,r.kt)("strong",{parentName:"li"},"visitor dob"),", ",(0,r.kt)("strong",{parentName:"li"},"visitor lastname"),", ",(0,r.kt)("strong",{parentName:"li"},"visitor firstname"),",")),(0,r.kt)("ol",{start:12},(0,r.kt)("li",{parentName:"ol"},"Grab those data fields and drop them to our action inputs as shown below:")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Alt text",src:a(31050).Z,width:"971",height:"237"})),(0,r.kt)("p",null,"Remember, the external API won't accept the format of that data. We need to apply some data transformation to send the data in the expected format. In Flow Designer, we can use 'Transforms' to dynamically modify the data in fields."),(0,r.kt)("p",null,"Let's begin with the formatting of the date of birth. Remember that in the ServiceNow record, the date format is MM/DD/YYYY, but we need to send it to the API in the format YYYY-MM-DD."),(0,r.kt)("ol",{start:13},(0,r.kt)("li",{parentName:"ol"},"If you click the value in the ",(0,r.kt)("strong",{parentName:"li"},"dateofbirth")," field, it will show a ",(0,r.kt)("strong",{parentName:"li"},"fx")," icon, click on it, then type ",(0,r.kt)("strong",{parentName:"li"},"Replace")," (2), then select ",(0,r.kt)("strong",{parentName:"li"},"Replace String")," (3), we that Transforms we can use a simple regular expression to match the string to replace.\nAlt text](<./images///2023-09-21_13-08-32 (2).png>)")),(0,r.kt)("ol",{start:14},(0,r.kt)("li",{parentName:"ol"},"On the ",(0,r.kt)("strong",{parentName:"li"},"Regex")," field (1) type this value ",(0,r.kt)("strong",{parentName:"li"},"(\\d{2})/(\\d{2})/(\\d{4})")," and on the ",(0,r.kt)("strong",{parentName:"li"},"Replace String")," field (2) type this value ",(0,r.kt)("strong",{parentName:"li"},"$3-$1-$2"),(0,r.kt)("img",{alt:"Alt text",src:a(54804).Z,width:"814",height:"440"}))),(0,r.kt)("admonition",{title:"Additional reading if interested to learn more about Regular expression, otherwise skip this. ",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"The regex pattern ",(0,r.kt)("inlineCode",{parentName:"p"},"(\\d{2})/(\\d{2})/(\\d{4})")," is used to match and capture date strings in the format MM/DD/YYYY. "),(0,r.kt)("p",{parentName:"admonition"},"Here's what each part of the pattern does:"),(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"(\\d{2})"),": This part captures two digits (0-9) and encloses them in parentheses to create a capturing group. It's used to match the month portion of the date (MM). ",(0,r.kt)("inlineCode",{parentName:"li"},"\\d")," represents any digit, and ",(0,r.kt)("inlineCode",{parentName:"li"},"{2}")," specifies that exactly two digits must be matched.")),(0,r.kt)("ol",{parentName:"admonition",start:2},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"/"),": This part matches the forward slash character (/) literally. It's used to separate the month, day, and year portions of the date.")),(0,r.kt)("ol",{parentName:"admonition",start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"(\\d{2})"),": Similar to the first part, this captures two digits (0-9) to match the day portion of the date (DD).")),(0,r.kt)("ol",{parentName:"admonition",start:4},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"/"),": Another forward slash to separate the day and year.")),(0,r.kt)("ol",{parentName:"admonition",start:5},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"(\\d{4})"),": This captures four digits (0-9) to match the year portion of the date (YYYY).")),(0,r.kt)("p",{parentName:"admonition"},"So, when you apply this regex pattern to a string, it will capture date strings in the format MM/DD/YYYY and store the month, day, and year portions as separate capturing groups, allowing you to extract and work with these components individually."),(0,r.kt)("p",{parentName:"admonition"},"In the replace string field we have typed ",(0,r.kt)("strong",{parentName:"p"},"$3-$1-$2")),(0,r.kt)("p",{parentName:"admonition"},'$3 refers to the contents of capturing group 3, which is the year "2023."\n$1 refers to the contents of capturing group 1, which is the month "12."\n$2 refers to the contents of capturing group 2, which is the day "31."'),(0,r.kt)("p",{parentName:"admonition"},"This allows us to format the date as desired, although there might be other ways to achieve this as well.")),(0,r.kt)("p",null,"Now, let's perform some data transformation for the First Name and Last Name fields. They arrive in uppercase from ServiceNow, but the external API expects these values with only the first letter of the first name and the first letter of the last name in uppercase. Therefore, we need to transform the data to make it compatible. We could potentially use existing Transforms to accomplish this, but we want to introduce another method for more advanced data transformation. You can use the inline script feature on the field to transform the data."),(0,r.kt)("ol",{start:15},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Beside the firstname field, click that Toggle Scripting icon as shown below\n",(0,r.kt)("img",{alt:"Alt text",src:a(42519).Z,width:"604",height:"299"})),(0,r.kt)("p",{parentName:"li"},"add this piece of code: "),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// Access the value you want to transform\nvar inputString = fd_data.trigger.current.visitor_firstname; // Replace 'your_field_name' with the actual field name\n\n// Check if the inputString is not empty\nif (inputString) {\n   // Convert the string to lowercase, except the first character\n   var firstChar = inputString.charAt(0);\n   var restOfString = inputString.slice(1).toLowerCase();\n   var transformedString = firstChar + restOfString;\n   \n   // Return the transformed value\n   return transformedString;\n} else {\n   // If the input is empty, return it as-is\n   return inputString;\n}\n")))),(0,r.kt)("ol",{start:16},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"On the ",(0,r.kt)("strong",{parentName:"p"},"lastname")," field add this piece of code"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// Access the value you want to transform\nvar inputString = fd_data.trigger.current.visitor_lastname; // Replace 'your_field_name' with the actual field name\n\n// Check if the inputString is not empty\nif (inputString) {\n   // Convert the string to lowercase, except the first character\n   var firstChar = inputString.charAt(0);\n   var restOfString = inputString.slice(1).toLowerCase();\n   var transformedString = firstChar + restOfString;\n\n   // Return the transformed value\n   return transformedString;\n} else {\n   // If the input is empty, return it as-is\n   return inputString;\n}\n")))),(0,r.kt)("p",null,'In summary, this script capitalizes the first letter of the input string while converting the rest of the string to lowercase. If the input is empty, it returns an empty string. This transformation ensures that the format matches the expectations of the external API endpoint."'))}d.isMDXComponent=!0},40885:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/2023-09-21_12-01-25-5862737ce06378092bc16b3c97f83dfb.png"},46031:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/2023-09-21_12-27-20-5419c9f1795d9f7d4c35375560392a97.png"},93137:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/2023-09-21_12-35-12-74d01c2b4ccb2f5445d78627e8a2e6ff.png"},21209:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/2023-09-21_12-37-28-c08f8c96ce81c0b39063ddb63f679dbe.png"},50402:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/2023-09-21_12-39-32-9dc05e6021e0f5788c1882b3dfadcd29.png"},72726:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/2023-09-21_12-41-26-6c6b8ca67a98c1dfc3dc7ed63b8f275f.png"},18056:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/2023-09-21_12-42-11-1d4630227818d34992420847bf07aead.png"},96783:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/2023-09-21_12-43-19-572da7bbcf7d830a354a3045eab5ec2d.png"},18063:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/2023-09-21_12-46-22-d26ad3570d4ddf36536b22aac83e3045.png"},78230:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/2023-09-21_12-50-00-de81a60b0d48687b1b94069867d74091.png"},15694:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/2023-09-21_12-52-53-c97560c8184020384fd9be89b591da67.png"},27206:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/2023-09-21_12-56-25-623acb62e93f52f2d046d38facd5becc.png"},31050:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/2023-09-21_13-02-10-e4a4513493f2b0cb69fc1a7e383166ea.png"},54804:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/2023-09-21_13-15-37-6492d45a8f0b78788033d8ef66ca6cba.png"},42519:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/2023-09-21_13-26-47-2ad52c0cfef576c2fdecf9de98d4691e.png"}}]);